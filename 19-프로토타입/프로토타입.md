# 프로토타입과 **proto** 접근자 정리

## 1. 프로토타입 객체

- 프로토타입 객체(또는 줄여서 프로토타입)는 객체지향 프로그래밍의 상속을 구현하기 위해 존재한다.
- 어떤 객체의 상위(부모) 객체 역할을 하며, 다른 객체가 자유롭게 자신의 프로퍼티(메서드 포함)를 사용할 수 있도록 공유한다.
- 모든 객체는 내부 슬롯 [[Prototype]]을 가지며, 이는 프로토타입 객체를 참조한다.
- [[Prototype]] 값은 객체 생성 방식에 따라 달라진다.
- 리터럴로 생성한 객체 → Object.prototype을 프로토타입으로 가진다.
- 생성자 함수로 생성한 객체 → 해당 생성자의 prototype 프로퍼티에 바인딩된 객체를 프로토타입으로 가진다.

## 2. **proto** 접근자 프로퍼티

- [[Prototype]]에 직접 접근할 수 없으므로, 간접적으로 접근하기 위한 방법이 바로 **proto**.
- 모든 객체는 **proto**를 통해 자신의 프로토타입에 접근할 수 있다.
- **proto**는 접근자 프로퍼티이므로 내부적으로 [[Get]], [[Set]] 메서드가 동작한다.
- getter로 접근하면 [[Prototype]]의 값을 반환.
- setter로 접근하면 새로운 프로토타입을 설정.

```js
const obj = {};
const parent = { x: 1 };

// obj의 프로토타입을 parent로 교체
obj.proto = parent;

console.log(obj.x); // 1
```

## 3. 상속을 통한 동작

- 모든 객체는 직접 **proto**를 소유하지 않고, Object.prototype의 **proto**를 상속받아 사용한다.
- 따라서 **proto** 자체는 상속을 통해 사용되는 것이다.

```js
const person = { name: "Lee" };

console.log(person.hasOwnProperty("**proto**")); // false
console.log(Object.getOwnPropertyDescriptor(Object.prototype, "**proto**"));
// { get: f, set: f, enumerable: false, configurable: true }
```

## 4. 프로토타입 체인

- 모든 객체는 프로토타입의 계층 구조, 즉 프로토타입 체인에 묶여 있다.
- 객체에서 프로퍼티를 찾을 때, 해당 객체에 없으면 프로토타입을 순차적으로 검색한다.
- 프로토타입 체인의 최상위는 Object.prototype이며, 이 객체도 프로토타입을 갖지만 값은 null.

## 5. **proto**의 제약

- **proto**를 코드 내에서 직접 사용하는 것은 권장되지 않는다.
- ES5까지는 비표준이었으나, 브라우저 호환성을 고려해 ES6에서 표준화.
- 하지만 모든 객체가 반드시 **proto**를 가질 수 있는 것은 아니다.
- 또한, 상호 참조(순환 참조) 같은 문제를 막기 위해 에러가 발생할 수도 있다.

```js
const parent = {};
const child = {};

// child의 프로토타입을 parent로 설정
child.**proto** = parent;

// 순환 참조 방지 → 에러 발생
parent.**proto** = child; // TypeError
```

## 6. 권장되는 대안 메서드

- Object.getPrototypeOf(obj)
  객체의 프로토타입을 안전하게 가져옴.
- Object.setPrototypeOf(obj, proto)
  객체의 프로토타입을 안전하게 교체.

```js
const obj = {};
const parent = { x: 1 };

Object.setPrototypeOf(obj, parent);
console.log(Object.getPrototypeOf(obj) === parent); // true
console.log(obj.x); // 1
```

- Object.create(proto)
  지정한 프로토타입을 직접 설정해 객체 생성 가능.

```js
const parent = { x: 1 };
const obj = Object.create(parent);

console.log(obj.x); // 1
console.log(Object.getPrototypeOf(obj) === parent); // true
```

- 모든 객체는 [[Prototype]] 내부 슬롯을 가진다.
- **proto**는 이 슬롯에 간접 접근하기 위한 접근자 프로퍼티다.
- 하지만 비표준이었기 때문에 실제 코드에서는 Object.getPrototypeOf, Object.setPrototypeOf, Object.create를 사용하는 것이 더 안전하고 권장된다.
